<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>iOS Style Calculator</title>
  <style>
    :root{
      --bg:#000000;
      --btn-dark:#333333;
      --btn-grey:#a5a5a5;
      --accent:#ff9f0a;
      --white:#ffffff;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
    }
    body{
      height:100vh;
      margin:0;
      background: var(--bg);
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .calc {
      width: 320px;
      max-width: 95vw;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
    }

    .display {
      color:var(--white);
      text-align:right;
      font-size:64px;
      line-height:1.2;
      min-height: 90px;
      padding: 20px 10px;
      font-weight:400;
      overflow:hidden;
      white-space:nowrap;
    }

    .grid {
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
      padding: 10px;
    }

    .btn {
      height: 68px;
      border-radius: 50%;
      border: none;
      font-size: 24px;
      font-weight:500;
      display:flex;
      align-items:center;
      justify-content:center;
      user-select:none;
      -webkit-user-select:none;
      transition: transform .07s ease;
    }

    .btn:active { transform: scale(0.95); }

    .btn.dark {
      background: var(--btn-dark);
      color: var(--white);
    }
    .btn.grey {
      background: var(--btn-grey);
      color: #000;
      font-weight:600;
    }
    .btn.accent {
      background: var(--accent);
      color: #fff;
      font-weight:600;
    }

    .btn.zero {
      grid-column: 1 / 3; 
      border-radius: 34px;
      justify-content:flex-start;
      padding-left:28px;
    }
  </style>
</head>
<body>
  <div class="calc" role="application" aria-label="Calculator">
    <div class="display" id="display">0</div>

    <div class="grid" id="buttons">
      <!-- row 1 -->
      <button class="btn grey" data-action="clear">AC</button>
      <button class="btn grey" data-action="neg">+/-</button>
      <button class="btn grey" data-action="percent">%</button>
      <button class="btn accent" data-action="operator" data-value="/">÷</button>

      <!-- row 2 -->
      <button class="btn dark" data-value="7">7</button>
      <button class="btn dark" data-value="8">8</button>
      <button class="btn dark" data-value="9">9</button>
      <button class="btn accent" data-action="operator" data-value="*">×</button>

      <!-- row 3 -->
      <button class="btn dark" data-value="4">4</button>
      <button class="btn dark" data-value="5">5</button>
      <button class="btn dark" data-value="6">6</button>
      <button class="btn accent" data-action="operator" data-value="-">−</button>

      <!-- row 4 -->
      <button class="btn dark" data-value="1">1</button>
      <button class="btn dark" data-value="2">2</button>
      <button class="btn dark" data-value="3">3</button>
      <button class="btn accent" data-action="operator" data-value="+">+</button>

      <!-- row 5 -->
      <button class="btn dark zero" data-value="0">0</button>
      <button class="btn dark" data-action="decimal">.</button>
      <button class="btn accent" data-action="equals">=</button>
    </div>
  </div>

  <script>
    (function(){
      const display = document.getElementById('display');
      const buttons = document.getElementById('buttons');

      let displayValue = '0';
      let firstOperand = null;
      let operator = null;
      let waitingForSecond = false;
      let lastSecond = null;

      function updateDisplay(){
        display.textContent = displayValue;
      }

      function inputDigit(d){
        if (waitingForSecond) {
          displayValue = d;
          waitingForSecond = false;
        } else {
          displayValue = (displayValue === '0') ? d : displayValue + d;
        }
        updateDisplay();
      }

      function inputDecimal(){
        if (waitingForSecond){
          displayValue = '0.';
          waitingForSecond = false;
          updateDisplay();
          return;
        }
        if (!displayValue.includes('.')){
          displayValue = displayValue + '.';
          updateDisplay();
        }
      }

      function clearAll(){
        displayValue = '0';
        firstOperand = null;
        operator = null;
        waitingForSecond = false;
        lastSecond = null;
        updateDisplay();
      }

      function toggleSign(){
        if (displayValue === '0') return;
        if (displayValue.startsWith('-')){
          displayValue = displayValue.slice(1);
        } else {
          displayValue = '-' + displayValue;
        }
        updateDisplay();
      }

      function percent(){
        let num = parseFloat(displayValue);
        if (isNaN(num)) return;
        num = num / 100;
        displayValue = String(num);
        updateDisplay();
      }

      function performCalculation(op, a, b){
        a = Number(a); b = Number(b);
        switch(op){
          case '+': return a + b;
          case '-': return a - b;
          case '*': return a * b;
          case '/': return b === 0 ? NaN : a / b;
        }
        return b;
      }

      function handleOperator(nextOperator){
        const inputValue = displayValue;
        if (firstOperand === null){
          firstOperand = inputValue;
        } else if (operator) {
          if (!waitingForSecond){
            const result = performCalculation(operator, firstOperand, inputValue);
            displayValue = String(result);
            firstOperand = displayValue;
          }
        }
        waitingForSecond = true;
        operator = nextOperator;
        updateDisplay();
      }

      function handleEquals(){
        if (!operator) return;
        let second = waitingForSecond ? lastSecond : displayValue;
        if (second === null) return;
        const result = performCalculation(operator, firstOperand, second);
        displayValue = (!isFinite(result) || isNaN(result)) ? 'Error' : String(result);
        lastSecond = second;
        firstOperand = displayValue;
        waitingForSecond = true;
        updateDisplay();
      }

      buttons.addEventListener('click', (e)=>{
        const btn = e.target.closest('button');
        if (!btn) return;
        const val = btn.getAttribute('data-value');
        const action = btn.getAttribute('data-action');

        if (val && /^[0-9]$/.test(val)){
          inputDigit(val);
          return;
        }
        if (action === 'decimal') { inputDecimal(); return; }
        if (action === 'clear') { clearAll(); return; }
        if (action === 'neg') { toggleSign(); return; }
        if (action === 'percent') { percent(); return; }
        if (action === 'operator'){ handleOperator(btn.getAttribute('data-value')); return; }
        if (action === 'equals'){ handleEquals(); return; }
      });

      updateDisplay();
    })();
  </script>
</body>
</html>
